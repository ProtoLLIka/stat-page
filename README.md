# stat-page
## Задача
Существует система для решения школьниками задач по программированию. Все их решения заносятся в БД. Задача: создать систему для отображения статистики решений каждого ученика.
В строке запроса как праметр передается id нужного ученика. На странице должен отобразиться график, с возможностью показать данные по дням, неделям или месяцам. График должени иметь вид гистограммы. При нажатии на один из столбцов, появляется таблица с детальным описанием каждой решеноой задачи (название, кол-во баллов, дата решения)
## Используемые технологии
### Клиентская часть:
Разрабатывается на основе JavaScript-библиотеки **React**. Работает на **Node.JS** сервере. Языками разработки в основном являются **TypeScript** и **HTML**
### Серверная часть:
Разрабатывается аналогично как **Node.JS** сервер, с использованием фрэймворка **Nest JS**. Язык разработки **TypeScript**. Для общения с базой данных используется **TypeORM** библиотека.
## Описание клиента
### Описание
Клиент получает на вход id пользователя данные которого будут отображаться. Основная задача клиента - получить и преобразовать данные для отображения. Клиент получает такие данные как множество данных для отображения графика, для заполнения таблицы описанием (тоже множество объектов) и т.д.
Так же клиент отображает данные за текущую дату и на N единиц времени назад.
### Разбор состовляющих
Проект клиента находится в директории client. В основном клиент состоит из одного родительского компонента (**Statistic**) и нескольки дочерних. Есть так же компоненты **Page404** (старница ответственная за 404ую ошибку) и **AdminAuthPage** которая на данный момент не используется.
Описание дочерних эллементов компонента **Statistic**:
+ provider - общий невидемый компонент, содержащий в себе все отображаемые компоненты. Задача provider - общее описание состояния копонента и общение с сервером Например в state есть поле isDownloading, показывающее происходит ли загрузка внутри компонента. Так же например поле в state activeInterval хранит в себе объект описывающий текщий выбранный интервал гистограммы.
+ groupByButtons - группа кнопок, которые ответственны за выбор типа группировки (по дням, неделям или месяцам)
+ discription - таблица в которой пишется подробное описание задач при нажатии на колонку на гистограмме 
+ chart - отображаемый график, где по оХ еденицы времени, а по оY сумма баллов всех задач за еденицу времени.
Так же есть "простые" копмоненты:
+ loader - pre-loader который отображается при загрузке данных в таблцу
+ noData - перекрывает график, если клиент получил пустое множество с сервера 
[Тут](https://www.youtube.com/watch?v=heLMo66fd0c) можно посмотреть процесс работы компонента.

## Описание клиента
### Описание
Основная задача сервера - получение данных с бд (реализовано через билиотеку TypeORM) и группировка данных для клиента.
### Запросы сервера
Сервер обрабатывает след. запросы клиента:
- GET '/chartData?id=&start=&end=&groupBy=' - получить данные для графика. Сервер получает все данные из БД за этот участок времени, группирует их и подсчитывает сумму баллов в каждом участке. Возвращает множество объектов с полями начала и конца интервала времени и суммой баллов
  - id - это идентификатор пользователя
  - start и end - временные границы интервала времени, за который нужны данные
  - groupBy - тип группировки данных (по дням, месяцам, неделям) 
- GET '/tasksDisc?id=&start=&end=' - получить данные для таблицы с описанием. Сервер получает данные из БД за этот интервал и возвращает множество объектов с полем названия задачи, датой ее решения и кол-вом баллов за задачу
  - id - это идентификатор пользователя
  - start и end - временные границы интервала времени, за который нужны данные
